<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../flip-card/flip-card.html">

<dom-module id="flip-card-board">
  <template>
    <style>
      :host {
        display: block;
      }

      flip-card {
        margin:10px;
      }

      body {
        height: 100%;
      }

      #container {
        width: 100%;
        height: 100%;
        display: grid;
        grid-template-rows: 200px 200px 200px;
        grid-template-columns: 20% 20% 20% 20%;

        grid-column-gap: 1em; 
        grid-row-gap: 1em;
      }

      .item1 {
        grid-column: 1;
        grid-row: 1;
      }

      .item2 {
        grid-column: 2;
        grid-row: 1;
      }

      .item3 {
        grid-column: 3;
        grid-row: 1;
      }

      .item4 {
        grid-column: 4;
        grid-row: 1;
      }

  
    </style>

    <div id="container">

      <flip-card class="item1">
        <img id='item1img' style="width:100%;height:100%" src=""></img>
      </flip-card>
      
      <flip-card class="item2">
        <img id='item2img' style="width:100%;height:100%" src=""></img>
      </flip-card>

      <flip-card class="item3">        
        <img id='item3img' style="width:100%;height:100%" src=""></img>
      </flip-card>

      <flip-card class="item4">        
        <img id='item4img' style="width:100%;height:100%" src=""></img>
      </flip-card>

      <flip-card class="item5">        
        <img id='item5img' style="width:100%;height:100%" src=""></img>
      </flip-card>

      <flip-card class="item6"></flip-card>
      <flip-card class="item7"></flip-card>
      <flip-card class="item8"></flip-card>

      <flip-card class="item9"></flip-card>
      <flip-card class="item10"></flip-card>
      <flip-card class="item11"></flip-card>
      <flip-card class="item12"></flip-card>
    </div>

  </template>
</dom-module>

<script>
  
  class FlipCardBoard extends Polymer.Element {

    constructor() {
      super();
    }
    static get config(){ 
      return {
        properties: {
          player1 : {type: String},
          player2 : {type: String},
          activePlayer: {type: String},
          cardsSelected: {type: Array}
        }
      }
    }

    generateCards(image, usedCards) {
      //Do rogue
      let card1 = '#item' + Math.floor((Math.random() * 5) + 1) + 'img';
      let card2 = '#item' + Math.floor((Math.random() * 5) + 1) + 'img';

      while (card2 === card1) {
        card2 = '#item' + Math.floor((Math.random() * 5) + 1) + 'img';
      }

      console.log(card1);
      let nodeCard1 = this.shadowRoot.querySelector(card1);
      console.log(nodeCard1);
      nodeCard1.setAttribute("src",`./images/${image}.jpg`);

      console.log(card2);
      let nodeCard2 = this.shadowRoot.querySelector(card2);
      console.log(nodeCard2);
      nodeCard2.setAttribute("src",`./images/${image}.jpg`);

    }

    static get is() {
      return 'flip-card-board';
    }

    connectedCallback() {
      super.connectedCallback();
      this.generateCards('rogue');
    }

  }

  customElements.define(FlipCardBoard.is, FlipCardBoard);

</script>

